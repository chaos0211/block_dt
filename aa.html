<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>个人中心 - 区块链捐赠系统</title>
    <script src="https://res.gemcoder.com/js/reload.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#3B82F6',
              secondary: '#10B981',
              neutral: {
                100: '#F3F4F6',
                200: '#E5E7EB',
                300: '#D1D5DB',
                700: '#374151',
                800: '#1F2937',
                900: '#111827'
              }
            },
            fontFamily: {
              inter: ['Inter', 'system-ui', 'sans-serif']
            },
            spacing: {
              '18': '4.5rem'
            }
          }
        }
      };
    </script>
    <style type="text/tailwindcss">
      @layer utilities {
          .content-auto {
              content-visibility: auto;
          }
          .card-shadow {
              box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
          }
          .input-focus {
              @apply focus:ring-2 focus:ring-primary/50 focus:border-primary focus:outline-none;
          }
          .btn-primary {
              @apply bg-primary text-white px-4 py-2 rounded-lg transition-all duration-300 hover:bg-primary/90 active:scale-100;
          }
          .btn-secondary {
              @apply bg-white text-neutral-700 border border-neutral-300 px-4 py-2 rounded-lg transition-all duration-300 hover:bg-neutral-100 active:scale-100;
          }
      }
    </style>
  </head>
  <body class="bg-neutral-100 font-inter text-neutral-800 min-h-screen">
    <!-- [MODULE] abc_主内容区域 -->
    <main class="container mx-auto px-4 py-8 max-w-4xl">
      <!-- [MODULE] d23_个人中心页面 -->
      <div id="profile-page" class="space-y-8">
        <!-- [MODULE] 33f_个人中心页面:页面标题 -->
        <div class="flex justify-between items-center">
          <div>
            <h1
              class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-neutral-900"
            >
              个人中心
            </h1>
            <p class="text-neutral-700 mt-1">查看和管理您的账户信息</p>
          </div>
        </div>
        <!-- [/MODULE] 33f_个人中心页面:页面标题 -- 包含页面标题和说明文字 -->
        <!-- [MODULE] a7d_个人中心页面:账户基本信息区域 -->
        <div class="bg-white rounded-xl p-6 card-shadow">
          <h2 class="text-xl font-semibold mb-6 flex items-center">
            <i class="fas fa-user-circle text-primary mr-2"> </i>
            账户基本信息
          </h2>
          <div class="space-y-6">
            <!-- [MODULE] b9c_个人中心页面:用户名信息 -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-center">
              <label class="text-neutral-700 font-medium"> 用户名 </label>
              <div
                class="md:col-span-2 bg-neutral-100 rounded-lg p-3 min-h-[42px] flex items-center"
              >
                <span id="username-display"> 公益捐赠者_2023 </span>
              </div>
            </div>
            <!-- [/MODULE] b9c_个人中心页面:用户名信息 -- 展示用户名，不可编辑 -->
            <!-- [MODULE] c4e_个人中心页面:邮箱信息 -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-center">
              <label class="text-neutral-700 font-medium"> 绑定邮箱 </label>
              <div class="md:col-span-2 flex items-center space-x-3">
                <div
                  id="email-display"
                  class="flex-1 bg-neutral-100 rounded-lg p-3 min-h-[42px] flex items-center"
                >
                  <span> donor@example.com </span>
                </div>
                <button
                  id="edit-email-btn"
                  class="btn-secondary flex items-center text-sm"
                >
                  <i class="fas fa-pencil-alt mr-1"> </i>
                  编辑
                </button>
              </div>
            </div>
            <!-- [/MODULE] c4e_个人中心页面:邮箱信息 -- 展示绑定邮箱，包含编辑按钮，点击可修改邮箱 -->
            <!-- [MODULE] d5f_个人中心页面:钱包地址信息 -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-start">
              <label class="text-neutral-700 font-medium pt-3">
                区块链钱包地址
              </label>
              <div class="md:col-span-2 flex flex-col space-y-2">
                <div
                  class="bg-neutral-100 rounded-lg p-3 min-h-[42px] flex items-center break-all"
                >
                  <span id="wallet-address">
                    0x742d35Cc6634C0532925a3b844Bc454e4438f44e
                  </span>
                </div>
                <button
                  id="copy-wallet-btn"
                  class="btn-secondary self-start text-sm flex items-center"
                >
                  <i class="fas fa-copy mr-1"> </i>
                  复制地址
                </button>
              </div>
            </div>
            <!-- [/MODULE] d5f_个人中心页面:钱包地址信息 -- 展示区块链钱包地址，包含复制按钮，点击可复制钱包地址 -->
            <!-- [MODULE] e6g_个人中心页面:账户创建时间 -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-center">
              <label class="text-neutral-700 font-medium"> 账户创建时间 </label>
              <div
                class="md:col-span-2 bg-neutral-100 rounded-lg p-3 min-h-[42px] flex items-center"
              >
                <span> 2023-01-15 09:30:45 </span>
              </div>
            </div>
            <!-- [/MODULE] e6g_个人中心页面:账户创建时间 -- 展示账户创建时间，不可编辑 -->
          </div>
        </div>
        <!-- [/MODULE] a7d_个人中心页面:账户基本信息区域 -- 包含用户名、绑定邮箱（可编辑）、区块链钱包地址（可复制）和账户创建时间等信息 -->
        <!-- [MODULE] f8h_个人中心页面:账户资产与状态区域 -->
        <div class="bg-white rounded-xl p-6 card-shadow">
          <h2 class="text-xl font-semibold mb-6 flex items-center">
            <i class="fas fa-wallet text-secondary mr-2"> </i>
            账户资产与状态
          </h2>
          <div class="space-y-6">
            <!-- [MODULE] g1i_个人中心页面:账户余额信息 -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-center">
              <label class="text-neutral-700 font-medium"> 账户余额 </label>
              <div class="md:col-span-2">
                <div
                  class="bg-neutral-100 rounded-lg p-4 min-h-[42px] flex flex-col"
                >
                  <div class="flex items-baseline">
                    <span
                      id="account-balance"
                      class="text-2xl font-bold text-secondary"
                    >
                      12.50
                    </span>
                    <span class="ml-2 text-neutral-700"> ETH </span>
                  </div>
                  <p class="text-sm text-neutral-700 mt-1">
                    <i class="fas fa-info-circle mr-1"> </i>
                    余额仅能通过捐赠等业务行为变动，无法直接修改
                  </p>
                </div>
              </div>
            </div>
            <!-- [/MODULE] g1i_个人中心页面:账户余额信息 -- 展示当前账户余额，包含余额数值、单位和说明文字，提示余额仅能通过捐赠等业务行为变动 -->
          </div>
        </div>
        <!-- [/MODULE] f8h_个人中心页面:账户资产与状态区域 -- 包含账户余额信息，显示可用于公益捐赠的资金情况 -->
      </div>
      <!-- [/MODULE] d23_个人中心页面 -- 展示和管理当前登录用户的基础账户信息与资产状态 -->
    </main>
    <!-- [/MODULE] abc_主内容区域 -- 包含个人中心页面 -->
    <!-- [MODULE] h2j_个人中心页面:邮箱编辑模态框 -->
    <div
      id="email-modal"
      class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden"
    >
      <div
        class="bg-white rounded-xl p-6 max-w-md w-full mx-4 transform transition-all duration-300 scale-95 opacity-0"
        id="modal-content"
      >
        <h3 class="text-xl font-semibold mb-4">编辑邮箱</h3>
        <p class="text-neutral-700 mb-4">
          请输入新的邮箱地址，系统将发送验证邮件进行确认
        </p>
        <div class="space-y-4">
          <div>
            <label
              for="new-email"
              class="block text-neutral-700 font-medium mb-1"
            >
              新邮箱地址
            </label>
            <input
              type="email"
              id="new-email"
              class="w-full border border-neutral-300 rounded-lg p-3 input-focus"
              placeholder="请输入新邮箱地址"
            />
            <p id="email-error" class="text-red-500 text-sm mt-1 hidden">
              请输入有效的邮箱地址
            </p>
          </div>
          <div class="flex justify-end space-x-3 mt-6">
            <button id="cancel-email-btn" class="btn-secondary">取消</button>
            <button id="save-email-btn" class="btn-primary">保存</button>
          </div>
        </div>
      </div>
    </div>
    <!-- [/MODULE] h2j_个人中心页面:邮箱编辑模态框 -- 包含编辑邮箱的表单，有输入框、错误提示和取消、保存按钮 -->
    <!-- [MODULE] k3l_个人中心页面:复制成功提示 -->
    <div
      id="copy-toast"
      class="fixed bottom-6 right-6 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg transform translate-y-10 opacity-0 transition-all duration-300 flex items-center"
    >
      <i class="fas fa-check-circle mr-2"> </i>
      <span> 复制成功 </span>
    </div>
    <!-- [/MODULE] k3l_个人中心页面:复制成功提示 -- 显示复制操作成功的提示信息 -->
    <!-- [JSMOD] m4n_邮箱编辑功能 -->
    <script id="email-edit-script">
      // 获取DOM元素
      var editEmailBtn = document.getElementById('edit-email-btn');
      var emailModal = document.getElementById('email-modal');
      var modalContent = document.getElementById('modal-content');
      var cancelEmailBtn = document.getElementById('cancel-email-btn');
      var saveEmailBtn = document.getElementById('save-email-btn');
      var newEmailInput = document.getElementById('new-email');
      var emailError = document.getElementById('email-error');
      var emailDisplay = document.getElementById('email-display');
      // 打开邮箱编辑模态框
      editEmailBtn.addEventListener('click', function () {
        emailModal.classList.remove('hidden');
        // 添加动画效果
        setTimeout(function () {
          modalContent.classList.remove('scale-95', 'opacity-0');
          modalContent.classList.add('scale-100', 'opacity-100');
        }, 10);
        // 填充当前邮箱到输入框
        var currentEmail = emailDisplay.querySelector('span').textContent;
        newEmailInput.value = currentEmail;
        // 清除错误提示
        emailError.classList.add('hidden');
      });
      // 关闭邮箱编辑模态框
      function closeModal() {
        modalContent.classList.remove('scale-100', 'opacity-100');
        modalContent.classList.add('scale-95', 'opacity-0');
        setTimeout(function () {
          emailModal.classList.add('hidden');
        }, 300);
      }
      cancelEmailBtn.addEventListener('click', closeModal);
      // 点击模态框外部关闭
      emailModal.addEventListener('click', function (e) {
        if (e.target === emailModal) {
          closeModal();
        }
      });
      // 保存邮箱信息
      saveEmailBtn.addEventListener('click', function () {
        var email = newEmailInput.value.trim();
        var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
          emailError.classList.remove('hidden');
          return;
        }

        // 模拟保存成功
        emailDisplay.querySelector('span').textContent = email;
        closeModal();

        // 显示成功提示
        showToast('邮箱更新成功');
      });
      // 按ESC键关闭模态框
      document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape' && !emailModal.classList.contains('hidden')) {
          closeModal();
        }
      });
    </script>
    <!-- [/JSMOD] m4n_邮箱编辑功能 -- 实现邮箱编辑模态框的打开、关闭、表单验证和保存功能 -->
    <!-- [JSMOD] n5o_钱包地址复制功能 -->
    <script id="wallet-copy-script">
      var copyWalletBtn = document.getElementById('wallet-copy-btn');
      var walletAddress = document.getElementById('wallet-address').textContent;
      var copyToast = document.getElementById('copy-toast');
      // 复制钱包地址功能
      copyWalletBtn.addEventListener('click', async function () {
        try {
          await navigator.clipboard.writeText(walletAddress);
          showToast('钱包地址复制成功');
        } catch (err) {
          console.error("\u590D\u5236\u5931\u8D25:", err);
          showToast('复制失败，请手动复制', 'error');
        }
      });
      // 显示提示消息
      function showToast(message) {
        var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'success';
        var toast = copyToast;
        var toastIcon = toast.querySelector('i');
        var toastText = toast.querySelector('span');

        // 设置提示内容和样式
        toastText.textContent = message;
        if (type === 'error') {
          toast.classList.remove('bg-green-500');
          toast.classList.add('bg-red-500');
          toastIcon.className = 'fas fa-exclamation-circle mr-2';
        } else {
          toast.classList.remove('bg-red-500');
          toast.classList.add('bg-green-500');
          toastIcon.className = 'fas fa-check-circle mr-2';
        }

        // 显示提示
        toast.classList.remove('translate-y-10', 'opacity-0');
        toast.classList.add('translate-y-0', 'opacity-100');

        // 3秒后隐藏提示
        setTimeout(function () {
          toast.classList.remove('translate-y-0', 'opacity-100');
          toast.classList.add('translate-y-10', 'opacity-0');
        }, 3000);
      }
    </script>
    <!-- [/JSMOD] n5o_钱包地址复制功能 -- 实现钱包地址的复制功能和复制成功/失败的提示 -->
  </body>
</html>
